$(document).ready(function() {
	let intervalSetter = setInterval(function () {
		let user = JSON.parse(sessionStorage.getItem("user"));
		if (user) {
			clearInterval(intervalSetter); // Stop checking once data is available
			if(user.image) {
				fileName = user.image.trim().split(/[/\\]/).pop();  
				$("#user-image-preview").html(`<img src="/vendor-service/images/${fileName}" alt="Preview">`);
			}
			else $("#user-image-preview").html(`<img src="../images/profilepic2.jpeg"" alt="Preview">`);
			// Open file dialog when "Change Photo" button is clicked
		    $("#changePhoto").on("click", function () {
		        $("#image").trigger("click");
			});
			// Handle Image Selection and Preview
			$("#image").on("change", function (event) {
			    let file = event.target.files[0]; // Get the first selected file
			    if (file) {
			        let reader = new FileReader();
			        reader.onload = function (e) {
			            $("#user-image-preview").html(`<img src="${e.target.result}" alt="Preview">`); // Replace previous image
			        };
			        reader.readAsDataURL(file);
			    }
			});
		}
	}, 1000);
});